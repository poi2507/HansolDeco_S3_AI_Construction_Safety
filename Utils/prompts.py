
from langchain import PromptTemplate

# 관련 문서를 참조하여 재발 방지 대책 및 향후 조치 계획을 작성하는 프롬프트
retriever_prompt = PromptTemplate.from_template(
    """
아래는 공사 현장에서 발생한 사고와 관련된 여러 문서들의 정보입니다.
각 문서에는 사건에 대한 상세한 사고 정보와 관련 조치 사항이 기록되어 있습니다.

<관련 문서들 (최대 5개)>
{retrieved_documents}

지시사항:

1. 위 문서들에 기재된 사고 정보와 조치 사항을 반드시 반영하여 답변하세요.

2. 불필요한 부연 설명이나 반복 없이 핵심 내용만 요약하세요.

3. 답변은 한국어로 작성하며, 문장 말미에 불필요한 기호나 종결 어구를 사용하지 마세요.

4. 답변은 항목별 번호나 나열 형식이 아닌, 하나의 통합된 문단 형식으로 작성하여 자연스럽게 연결된 문장으로 완성하세요.

5. 주어진 사건 정보와 가장 유사한 관련 문서들만을 참고하여 답변을 생성하세요.

6. 재발 방지 대책 및 향후 조치 계획만을 간결하고 핵심적으로 작성하세요.

주어진 사건 정보:
{accident_info}

재발방지대책 및 향후조치계획:
"""
)

# 관련 문서 없이 단일 사건 정보만을 참조하여 재발 방지 대책 및 향후 조치 계획을 작성하는 프롬프트
non_retriever_prompt = PromptTemplate.from_template(
    """
아래는 건설 현장에서 발생한 단일 사건 정보입니다. 이 정보를 토대로,
불필요한 부연 설명을 줄이고 핵심적인 재발 방지 대책 및 향후 조치 계획을 간결하게 작성하세요.
답변은 한국어로 작성하며, 문장 말미에 불필요한 기호나 종결 어구를 사용하지 말고,
하나의 단락으로 자연스럽게 연결된 문장으로 완성하세요.

주어진 사건 정보: {accident_info}
재발방지대책 및 향후조치계획:
"""
)

refine_prompt = PromptTemplate.from_template(
    """
아래는 건설 현장에서 발생한 사건 정보와, 이에 대해 모델이 생성한 중간 조치사항입니다.
해당 조치사항은 문장이 부자연스럽거나 같은 말을 반복할 수 있으므로,
조치사항 예시 자료를 함께 참고하여 최종 조치사항을 자연스럽게 다듬고 핵심을 정리해 주세요.

[사건 정보]
{question}

[모델 생성 결과 (중간 조치사항)]
{answer}

[조치사항 예시]
{retrieved_documents}

[지시사항]
1) 위 정보를 바탕으로, 문장을 자연스럽고 간결하게 다듬으세요.
2) 같은 내용을 반복하는 구절은 합치거나 제거하여 중복 표현을 최소화하세요.
3) 문장 끝에 불필요한 기호나 종결 어구를 사용하지 말고, 자연스럽게 마무리하세요.
4)[모델 생성 결과 (중간 조치사항)]의 내용만 다듬고 추가적인 글을 추가하지마세요.
5) 답변의 형태는 [조치사항 예시]와 유사해야합니다.

[최종 정리본]:
"""
)
